---

# PRD â€” Audio Folder Renamer Tool

## 1. Overview

### 1.1 ××˜×¨×ª ×”×¤×¨×•×™×§×˜

×‘× ×™×™×ª ×›×œ×™ CLI ×¤×©×•×˜ ××š ×œ×Ö¾×˜×¨×™×•×•×™××œ×™, ×”××©××© ×›× ×™×¡×•×™ ××§×¦×”Ö¾×œ×§×¦×” ×œÖ¾**opencode** ×•×œÖ¾**qwen3-coder:30b**, ×›×•×œ×œ:

* ×ª×›× ×•×Ÿ
* ××™××•×© ×§×•×“
* ×‘×“×™×§×•×ª
* ×ª×™×¢×•×“ ×•×”×¡×‘×¨×™×

×”×›×œ×™ ×™×‘×¦×¢ **×©×™× ×•×™ ×©××•×ª ×§×‘×¦×™ ××•×“×™×• ×‘×ª×™×§×™×”** ×¢×œ ×‘×¡×™×¡:

* ×©× ×’× ×¨×™ ×§×‘×•×¢
* ××¡×¤×•×¨ ×¢×•×œ×”
* ××•×¨×š ×”×©×™×¨ (Duration)

---

## 2. Goals & Success Criteria

### 2.1 Goals

* ×§×•×“ ×¢×•×‘×“ ×‘×¤×•×¢×œ (Production-ready ×œ×©×™××•×© ××™×©×™)
* ×§×¨×™××•×ª ×•×¤×©×˜×•×ª ×§×•×“
* ×‘×“×™×§×•×ª ×‘×¡×™×¡×™×•×ª
* ××‘× ×” ×‘×¨×•×¨ ×©×§×œ ×œÖ¾LLM ×œ×™×™×¦×¨ ×•×œ×ª×—×–×§
* ×“×•×’××” ×˜×•×‘×” ×œ×©×™××•×© ×‘Ö¾opencode ×›Ö¾orchestrator

### 2.2 Success Criteria

* ×”×¨×¦×” ×¢×œ ×ª×™×§×™×” ×¢× ×§×‘×¦×™ ××•×–×™×§×” ××©× ×” ××ª ×©××•×ª ×”×§×‘×¦×™× ×›× ×“×¨×©
* ××™×Ÿ ××•×‘×“×Ÿ ×§×‘×¦×™×
* ×”×¤×•×¨××˜ ×ª×•×× ×œ×§×•× ×¤×™×’×•×¨×¦×™×”
* ×‘×“×™×§×•×ª ×¢×•×‘×¨×•×ª

---

## 3. User Story

> ×›××©×ª××©, ×× ×™ ×¨×•×¦×” ×œ×ª×ª ×œ×›×œ×™ ×ª×™×§×™×” ×¢× ×§×‘×¦×™ ××•×–×™×§×” ×•×§×•×‘×¥ ×§×•× ×¤×™×’×•×¨×¦×™×”,
> ×•×”×›×œ×™ ×™×©× ×” ××ª ×©××•×ª ×›×œ ×§×‘×¦×™ ×”××•×“×™×• ×‘×ª×™×§×™×” ×œ×©××•×ª ××—×™×“×™× ×”×›×•×œ×œ×™× ××¡×¤×•×¨ ×•××•×¨×š ×”×©×™×¨,
> ×›×š ×©×”×¡×¤×¨×™×™×” ×ª×”×™×” ××¡×•×“×¨×ª ×•××—×™×“×”.

---

## 4. Functional Requirements

### 4.1 ×§×œ×˜

1. **Path ×œ×ª×™×§×™×”**
2. **×§×•×‘×¥ ×§×•× ×¤×™×’×•×¨×¦×™×”** (YAML ××• JSON)

#### ×“×•×’××ª ×§×•× ×¤×™×’×•×¨×¦×™×” (YAML)

```yaml
base_name: "My_Audio"
start_index: 1
index_padding: 2
time_format: "mm-ss"
separator: " - "
extensions:
  - mp3
  - wav
  - flac
```

---

### 4.2 ×œ×•×’×™×§×ª Rename

×¢×‘×•×¨ ×›×œ ×§×•×‘×¥ ××•×“×™×•:

1. ×§×¨×™××ª ××•×¨×š ×”×©×™×¨ (Duration)
2. ×¤×•×¨××˜ ×–××Ÿ (×œ××©×œ `03-42`)
3. ×™×¦×™×¨×ª ×©× ×—×“×©:

```text
<My_Audio> - <01> - <03-42>.mp3
```

---

### 4.3 ×¤×œ×˜

* ××•×ª× ×§×‘×¦×™×
* ××•×ª×” ×ª×™×§×™×”
* ×©××•×ª ×—×“×©×™× ×‘×œ×‘×“

---

## 5. Non-Functional Requirements

* ×©×™××•×© ××™×©×™ (××™×Ÿ ×¦×•×¨×š ×‘×”×¨×©××•×ª / sandbox)
* ×¨×™×¦×” ××§×•××™×ª (Docker ×¨×§ ×›×¡×‘×™×‘×ª × ×™×¡×•×™)
* ×§×•×“ ×‘×¨×•×¨, ×œ× ××•×¤×˜×™××™×–×¦×™×” ××•×§×“××ª
* Fail fast ×‘××§×¨×” ×©×œ ×©×’×™××”

---

## 6. Out of Scope

* GUI
* Undo / rollback
* ×¢×‘×•×“×” ×¨×§×•×¨×¡×™×‘×™×ª ×‘×ª×ª×™Ö¾×ª×™×§×™×•×ª
* × ×™×”×•×œ metadata (ID3 tagging)

---

## 7. Technical Design

### 7.1 ×©×¤×ª ××™××•×©

**Python 3.x**

× ×™××•×§:

* ×§×¨×™×
* ×¤×©×•×˜
* ×¡×¤×¨×™×•×ª ××•×“×™×• ×–××™× ×•×ª
* ××ª××™× ×××•×“ ×œÖ¾LLM reasoning

---

### 7.2 Dependencies

* `argparse`
* `pathlib`
* `pyyaml` ××• `json`
* `mutagen` (×œ×§×¨×™××ª duration ×©×œ ××•×“×™×•)

---

### 7.3 CLI Interface

```bash
python audio_renamer.py \
  --dir /path/to/music \
  --config config.yaml
```

---

## 8. Project Structure

```text
audio-renamer/
â”œâ”€â”€ audio_renamer/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ cli.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ scanner.py
â”‚   â”œâ”€â”€ duration.py
â”‚   â”œâ”€â”€ renamer.py
â”‚   â””â”€â”€ utils.py
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_config.py
â”‚   â”œâ”€â”€ test_duration.py
â”‚   â””â”€â”€ test_renamer.py
â”‚
â”œâ”€â”€ config.example.yaml
â”œâ”€â”€ README.md
â””â”€â”€ prd.md
```

---

## 9. Testing Strategy

### 9.1 ×¡×•×’×™ ×‘×“×™×§×•×ª

* Unit tests:

  * ×§×¨×™××ª ×§×•× ×¤×™×’×•×¨×¦×™×”
  * ×—×™×©×•×‘ duration
  * ×™×¦×™×¨×ª ×©× ×—×“×©
* ×©×™××•×© ×‘×§×‘×¦×™ ××•×“×™×• ×§×¦×¨×™× (fixtures)

### 9.2 Success

* `pytest` ×¢×•×‘×¨ ×œ×œ× ×©×’×™××•×ª

---

## 10. Documentation Requirements

### README.md ×™×›×œ×•×œ:

* ×ª×™××•×¨ ×”×›×œ×™
* ×“×•×’××ª ×©×™××•×©
* ×”×¡×‘×¨ ×¢×œ ××‘× ×” ×”×¤×¨×•×™×§×˜
* ×”×¡×‘×¨ ×§×¦×¨ ×¢×œ ×›×œ ××•×“×•×œ

---

## 11. opencode Context

* ×”×¤×¨×•×™×§×˜ ××©××© ×›Ö¾**Task × ×™×¡×•×™×™**
* opencode:

  * ××™×™×¦×¨ ×§×•×“
  * ××¨×™×¥ ×‘×“×™×§×•×ª
  * ××©×¤×¨ ××‘× ×”
* ×”×›×œ×™ ×¢×¦××• **××™× ×• agent** ××œ× ×ª×•×¦×¨

---

## 12. Complexity Level

**ğŸŸ¡ ×‘×™× ×•× ×™**

* ××¡×¤×™×§ ××•×¨×›×‘ ×œ×‘×—×•×Ÿ reasoning
* ×œ× ××¡×•×‘×š ××“×™ ×œ×ª×—×–×•×§×”

---

## 13. Future Extensions (Optional)

* `--dry-run`
* ×ª××™×›×” ×‘×ª×ª×™Ö¾×ª×™×§×™×•×ª
* ×–×™×”×•×™ ××•×˜×•××˜×™ ×©×œ base_name
* ×—×™×‘×•×¨ ×œÖ¾ID3 tags

---
